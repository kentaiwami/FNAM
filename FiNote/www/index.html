<!DOCTYPE html>
    <html>
        <head>
            <meta charset="UTF-8">
            <meta name="format-detection" content="telephone=no">
            <meta name="msapplication-tap-highlight" content="no">
            <meta name="viewport" content="user-scalable=no, initial-scale=1, minimum-scale=1, width=device-width" />

            <link rel="stylesheet" href="onsen/css/onsenui.css">
            <link rel="stylesheet" href="onsen/css/onsen-css-components.css">
            <link rel="stylesheet" href="css/index.css">

            <script src="js/index.js"></script>
            <script src="js/jquery-3.1.0.min.js"></script>
            <script src="onsen/js/onsenui.js"></script>
            <script src="cordova.js"></script>
            <script src="js/ncmb.min.js" charset="utf-8"></script>
            <script src="js/spin.min.js"></script>
        </head>

        <body>

            <script>
               // utility.delete_localstorage();

               //ブラウザでの確認のため強制的に遷移させるテストコード
               utility.check_page_init('index',function(){utility.pushpage('movieadd_search.html', 'push', 0);});


               //エラー表示用
               window.onerror = function(msg, url, line, col, error) {  
                console.log(msg);
               };

               //サインアップしているかどうかをチェックする
               index.check_signup();
               // utility.browser_signup();
               
            </script>
            <ons-navigator id="myNavigator" page="index.html"></ons-navigator>
            <!--index.htmlの設定-->
            <ons-template id="index.html">

              <ons-page id="index">
                <script>
                    //ユーザ情報が存在する場合はローディング画面を表示する
                    var storage = window.localStorage;
                    var signup_flag = storage.getItem('signup_flag');
                    if (signup_flag == 'true') {
                        document.getElementById('index').innerHTML = '<img  src="img/splash.gif" alt="" / width="100%" height="100%">';
                    }
                </script>
              </ons-page>
            </ons-template>

            <!--tab.htmlの設定-->
            <ons-template id="tab.html">
              <ons-page id="tab">
                <ons-tabbar position="bottom">
                    <ons-tab page="movies.html" label="映画の一覧" icon="fa-square" active="true"></ons-tab>
                    <ons-tab page="search.html" label="検索" icon="fa-square"></ons-tab>
                    <ons-tab page="action.html" label="アクション" icon="fa-square"></ons-tab>
                  </ons-tabbar>
              </ons-page>
            </ons-template>

            <!--signup.htmlの設定-->
            <ons-template id="signup.html">
                <ons-page id="signup">
                    <!--会員登録成功時のアラート設定-->
                    <ons-alert-dialog id="signup-alert-success">
                        <div class="alert-dialog-title">登録完了</div>
                        <div class="alert-dialog-content">
                            会員情報の登録に成功しました！
                        </div>
                        <div class="alert-dialog-footer">
                            <button class="alert-dialog-button" onclick="Signup.alert_hide('signup-alert-success')">OK</button>
                        </div>
                    </ons-alert-dialog>

                    <!--会員登録失敗時のアラート設定-->
                    <ons-alert-dialog id="signup-alert-error">
                        <div class="alert-dialog-title">エラー</div>
                        <div class="alert-dialog-content" id="error-message"></div>
                        <div class="alert-dialog-footer">
                            <button class="alert-dialog-button" onclick="Signup.alert_hide('signup-alert-error')">OK</button>
                        </div>
                    </ons-alert-dialog>

                    <!--index.htmlのページの中身-->
                    <ons-page>
                        <ons-toolbar>
                            <div class="center">ユーザ登録</div>
                        </ons-toolbar>

                        <div class="formarea">
                            <!--ユーザ名とパスワードのフォーム-->
                            <div class="form-row">
                              <input type="text" id="username" class="text-input--underbar width-full" placeholder="ユーザ名" value="">
                            </div>

                            <div class="form-row">
                              <input type="password" id="password" class="text-input--underbar width-full" placeholder="パスワード" value="">
                            </div>

                            <div class="lucent">
                              <p class="note">Password - 6 characters or more</p>
                            </div>

                            <!--性別を選択させる領域-->
                            <ons-list>
                                <ons-list-header>性別</ons-list-header>
                                <ons-list-item tappable>
                                    <label class="left">
                                        <ons-input name="color" type="radio" input-id="radio-1" checked></ons-input>
                                    </label>
                                    <label for="radio-1" class="center">男性</label>
                                </ons-list-item>

                                <ons-list-item tappable>
                                    <label class="left">
                                        <ons-input name="color" type="radio" input-id="radio-2"></ons-input>
                                    </label>
                                    <label for="radio-2" class="center">女性</label>
                                </ons-list-item>
                            </ons-list>

                            <!--生年月日選択のフォーム-->
                            <ons-list-header>生年月日</ons-list-header>
                            <div class="form-row">
                                <input onfocus="Signup.birthday_pickerview()" type="text" id="birthday" class="text-input--underbar width-full" placeholder="生年月日を選択する" value="">
                            </div>
                             
                            <!--登録ボタン-->
                            <div class="vspc form-row">
                                <ons-button disabled modifier="large--cta" id="signup_button" onclick="Signup.usersignup()">登録</ons-button>
                            </div>
                        </div>
                    </ons-page>
                </ons-page>
            </ons-template>


            <!--movies.htmlの設定-->
            <ons-template id="movies.html">
              <ons-page id="movies">
                    <!--ポップオーバーの設定-->
                    <ons-popover direction="down" id="popover">
                        <div style="padding: 10px; text-align: center;">
                            <p><ons-button modifier="large"><i class="zmdi zmdi-view-list-alt"></i>　　リスト形式で表示</ons-button></p>
                            <p><ons-button modifier="large"><i class="zmdi zmdi-grid"></i>　グリッド形式で表示</ons-button></p>
                            <p><ons-button onclick="document.getElementById('popover').hide()">閉じる</ons-button></p>
                        </div>
                    </ons-popover>

                    <!--ツールバー-->
                    <ons-toolbar>
                        <div class="center">映画の一覧</div>
                        <div class="right">
                            <ons-toolbar-button onClick="document.getElementById('myNavigator').pushPage('movieadd_search.html')">
                                <ons-icon icon="ion-plus-round"></ons-icon>
                            </ons-toolbar-button>
                        </div>

                        <div class="left">
                            <ons-toolbar-button onclick="document.getElementById('popover').show(this)">
                                <ons-icon icon="ion-ios-settings"></ons-icon>
                            </ons-toolbar-button>
                        </div>
                    </ons-toolbar>
                    
                    <!--プルホック-->
                    <ons-pull-hook id="pull-hook">
                        Pull to refresh
                    </ons-pull-hook>

                    <!--リスト-->
                    <ons-list>
                        <ons-lazy-repeat id="infinite-list"></ons-lazy-repeat>
                    </ons-list>
                    <p id="nodata_message" style="text-align: center; opacity: 0.6; padding-top: 20px;"></p>
              </ons-page>
            </ons-template>


            <!--movieadd_search.htmlの設定-->
            <ons-template id="movieadd_search.html">
                <ons-page id="movieadd_search">
                    <!--ツールバー-->
                    <ons-toolbar>
                        <div class="left" id="movieadd_search_backbutton"><ons-back-button></ons-back-button></div>

                        <div class="center" id="movieadd_search_input">
                            <form action="javascript:movieadd_search.click_done()">
                                <input onfocus="movieadd_search.set_animation_movieadd_search_input('focus')" onblur="movieadd_search.set_animation_movieadd_search_input('blur')" style="margin: 6px 0px; margin-left: -50px; width: 170%;" type="search" id="search_movie_title" value="" placeholder="追加したい映画のタイトルを検索" class="search-input">
                            </form>
                        </div>

                        <div class="right">
                            <ons-toolbar-button onclick="movieadd_search.tap_cancel()" id="movieadd_search_cancel_button" style="margin-left: 200px; width: 10px;"></ons-toolbar-button>
                        </div>
                        
                        <div id="movieadd_search_reset"></div>
                    </ons-toolbar>

                    <!--ローディング表示、検索結果なしメッセージ用-->
                    <div id="movieadd_no_match_message" class="center_message"></div>

                    <!--リスト-->
                    <ons-list>
                        <ons-lazy-repeat id="movieadd_search_list"></ons-lazy-repeat>
                    </ons-list>
                    
                </ons-page>
            </ons-template>

            <!--movieadd.htmlの設定-->
            <ons-template id="movieadd.html">
              <ons-page modifier="shop-details" id="movieadd">

              	<!--ツールバー-->
                <ons-toolbar modifier="transparent" style="background-color: black; opacity: 0.7;">
                  <div class="right">
                    <ons-toolbar-button><ons-icon onClick="movieadd.fadeTo_detail_info()" icon="ion-ios-chatboxes" style="color: white;"></ons-icon></ons-toolbar-button>
                  </div>
                  <div class="left">
                    <ons-toolbar-button><ons-icon onClick="movieadd.tap_backbutton()" icon="ion-arrow-left-c" style="color: white; font-size: 28px;" fixed-width="false"></ons-icon></ons-toolbar-button>
                  </div>
                </ons-toolbar>

                <!--画面上部のカード部分-->
                <div class="card" id="movieadd_card" onclick="movieadd.fadeTo_detail_info()"></div>

                <!--レーティング-->
                <div class="rating">
                    <div class="rating-num" id="movieadd_rating"></div>
                </div>

                <!--ユーザアクション部分-->
                <ons-list style="border-top: none"><ons-list-item style="line-height: 1; padding: 0;">
                  <ons-row class="action">

                    <ons-col class="action-col">
                      <div class="action-icon"><ons-icon onClick="movieadd.add_movie()" icon="ion-plus-circled"></ons-icon></div>
                      <div class="action-label">追加</div>
                    </ons-col>

                    <ons-col class="action-col">
                      <div class="action-icon"><ons-icon onClick="movieadd.tap_add_feeling()" icon="ion-edit"></ons-icon></div>
                      <div class="action-label">気分リスト</div>
                    </ons-col>

                    <ons-col class="action-col">
                      <div class="action-icon"><ons-icon icon="ion-share"></ons-icon></div>
                      <div class="action-label">シェア</div>
                    </ons-col>

                  </ons-row>
                </ons-list-item></ons-list>
              </ons-page>
            </ons-template>

            <!--movieadd_feeling.htmlの設定-->
            <ons-template id="movieadd_feeling.html">
                <ons-page id="movieadd_feeling">
                    <!--ツールバー-->
                    <ons-toolbar>
                        <div class="center">気分リスト</div>
                        <div class="right">
      						<ons-toolbar-button onClick="movieadd_feeling.show_input_alert()">
					        	<ons-icon icon="ion-plus-round"></ons-icon>
					      	</ons-toolbar-button>
					    </div>
                    </ons-toolbar>

                    <ons-row>
					  <!-- <ons-col width="35%" style="margin: 25px;">
					  	<img src="img/film.png" width="100%">
					  	<div style="position:absolute; top:65px; left:35px; font-size: 30px;">ドキドキ</div>
					  </ons-col> -->
					</ons-row>

                </ons-page>
            </ons-template>


            <!--search.htmlの設定-->
            <ons-template id="search.html">
                <ons-page id="search">
                    <!--ツールバー-->
                    <ons-toolbar>
                        <div class="center">検索</div>
                    </ons-toolbar>

                    <p style="text-align: center; opacity: 0.6; padding-top: 20px;">
                      Search.html
                    </p>
                </ons-page>
            </ons-template>


            <!--action.htmlの設定-->
            <ons-template id="action.html">
                <ons-page id="action">
                    <!--ツールバー-->
                    <ons-toolbar>
                        <div class="center">アクション</div>
                    </ons-toolbar>

                    <p style="text-align: center; opacity: 0.6; padding-top: 20px;">
                      Actions.html
                    </p>
                </ons-page>
            </ons-template>
        </body>
    </html>
